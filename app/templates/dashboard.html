<!DOCTYPE html>
<html data-bs-theme="dark">
	<head>
    		<title>Dashboard - {{.Username}}</title>
	</head>
<body>
	{{ template "Header" . }}
	<br>
	<div style = "margin:auto; text-align:center;">
    		<h1 style = "text-transform:capitalize;"><p id="good_message"></p> {{.Username}}</h1>
		<input id="iv" type="hidden" value="{{.AESKey}}">
	<div>

	<hr class="border-2 w-75 mx-auto" />

	<div class="d-flex container">
		<div class="flex-grow-1 flex-wrap">

			<ul>
				<br>

				<div class="card-body d-flex align-items-center justify-content-center gap-3">
					<h2 class="mb-0">Notes</h2>
					<button class="button btn btn-success open-add-sticky-button mb-0">+</button>
				</div>

				<br>

				{{ range .Stickies }}
					<div class="sticky card text-white bg-dark flex-grow-1 flex-wrap">
						<div class="card-header d-flex align-items-center justify-content-between gap-3">
							<button class="btn btn-warning open-edit-sticky-button mb-0" data-modal-id="M-{{.DashID}}" data-title="{{.Title}}" data-description="{{.Description}}" data-id="{{.ID}}">O</button>
							<p class="mb-0" id="T-{{.DashID}}" value="{{.Title}}">{{.Title}}</p>
							<button id="{{.ID}}" onclick="postDeleteSticky(this.id)" class="btn btn-danger">X</button>
						</div>
						<div class="card-body">
							<p class="card-text" id="D-{{.DashID}}" value="{{.Description}}">{{.Description}}</p>
						</div>
					</div>

					<br>

				{{ end }}
			</ul>

		</div>

	</div>

	<hr class="border-2 w-75 mx-auto" />

	<div class="d-flex container">
		<div class="flex-grow-1 flex-wrap">
			<ul>
				<div class="card-body d-flex align-items-center justify-content-center gap-3">
                                        <h2 class="mb-0">CDs</h2>
                                        <button class="btn btn-success open-CD-button">+</button>
                                </div> 

				<br>

				<div class="card text-white bg-dark mb-3 mx-auto" style="margin:auto; width:75%; padding:10px;">
                                        <p class="card-text" id="CDTotal">Total : $0</p>
                                </div>

				{{ range .CDs }}
					<div class="CD card text-white bg-dark mb-3 mx-auto" style="margin:auto; width:75%; padding:10px;">
						<div class="card-header d-flex align-items-center justify-content-between gap-3">
							<button class="btn btn-warning open-edit-CD-button mb-0" data-bank="{{.BankID}}" data-start-date="{{.StartDate}}" data-deposit="{{.Deposit}}" data-term="{{.Term}}" data-apy="{{.Apy}}" data-id="{{.ID}}">O</button>
							<p class="{{.BankName}} mb-0">{{.BankName}}</p>
							<button id="{{.ID}}" onclick="postDeleteCD(this.id)" class="btn btn-danger mb-0">X</button>
						</div>

						<div class="card-body">
							<p class="card-text" id="Deposit-{{.DashID}}">{{.Deposit}}</p>
							<p class="card-text" id="Term-{{.DashID}}">{{.Term}}</p>
							<p class="card-text" id="Apy-{{.DashID}}">{{.Apy}}</p> 
							<p class="card-text" id="FinalAmount-{{.DashID}}"></p>
						</div>
					</div>

				{{ end }}
			</ul>
		</div>
	
		<div class="flex-grow-1 flex-wrap">
			<ul>
				<div class="card-body d-flex align-items-center justify-content-center gap-3">
					<h2 class="mb-0">Checking, Saving, Money Market</h2>
					<button class="btn btn-success open-add-bank-account-button">+</button>
				</div>

				<br>
				
				<div class="card text-white bg-dark mb-3 mx-auto" style="margin:auto; width:75%; padding:10px;">
					<p class="card-text" id="BankAccountTotal">Total : $0</p>
				</div>

				{{ range .BankAccounts }}
					<div class="bank_account card text-white bg-dark mb-3 mx-auto" style="margin:auto; width:75%; padding:10px;">
                                                <div class="card-header d-flex align-items-center justify-content-between gap-3">
							<button class="button btn btn-warning open-edit-bank-account-button mb-0" data-amount="{{.Amount}}" data-id="{{.ID}}">O</button>
                                                        <p id="{{.BankName}}">{{.BankName}}</p>
							<button id="{{.ID}}" onclick="postDeleteBankAccount(this.id)" class="btn btn-danger">X</button>
                                                </div>

                                                <div class="card-body">
                                                        <p class="card-text" id="A-{{.DashID}}" value="{{.Amount}}">{{.Amount}}</p>
                                                </div>
                                        </div>

				{{ end }} 
				
			</ul>

			<br><br>
		</div>
	</div>

	<hr class="border-2 w-75 mx-auto" />

	<div class="d-flex container">

		<div class="flex-grow-1 flex-wrap">
			<ul>
				<div class="card-body d-flex align-items-center justify-content-center gap-3">
                                        <h2 class="mb-0">Credit Card</h2>
                                        <button class="btn btn-success open-add-credit-card-button">+</button>
                                </div>
				
				<br>

			</ul>
		</div>
	</div>

	<!-- Edit Sticky Modal -->
	<div class="modal fade" id="editStickyModal" tabindex="-1" aria-labelledby="editStickyModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-dialog-centered mx-auto">
			<div class="modal-content">
				<form class="form" id="editStickyForm">
					<div class="modal-header">
						<h5 class="modal-title" id="editStickyModalLabel">Edit Sticky Note</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancel"></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label for="title" class="form-label">Title:</label>
							<input type="text" class="form-control" id="title" name="title" required>
						</div>
						<div class="mb-3">
							<label for="description" class="form-label">Description:</label>
							<textarea rows="5" maxlength="140" name="description" id="description" class="form-control" spellcheck="true" placeholder="Enter the description here" required></textarea>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
						<input type="submit" class="btn btn-success" value="Submit">
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Add Sticky Modal -->
	<div class="modal fade" id="addStickyModal" tabindex="-1" aria-labelledby="addStickyModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-dialog-centered mx-auto">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="addStickyModalLabel">Add Sticky Note</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<form class="form">
					<div class="modal-body">
						<div class="mb-3">
							<label for="title" class="form-label">Title:</label>
							<input type="text" id="title" name="title" class="form-control">
						</div>
						<div class="mb-3">
							<label for="description" class="form-label">Description:</label>
							<textarea rows="5" cols="40" maxlength="140" name="description" id="description" class="form-control" spellcheck="true" placeholder="Enter the description here"></textarea>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-success">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Add Bank Account Modal -->
	<div class="modal fade" id="addBankAccountModal" tabindex="-1" aria-labelledby="addBankAccountModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered mx-auto">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="addBankAccountModalLabel">Add Bank Account</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<form class="form">
					<div class="modal-body">
						<div class="mb-3">
							<label for="bank" class="form-label">Choose a bank:</label>
							<select id="bank" name="bank" class="form-select">
								{{ range .Banks }}
								<option value="{{.ID}}">{{.Name}}</option>
								{{ end }}
							</select>
						</div>
						<div class="mb-3">
							<label for="amount" class="form-label">Amount: $</label>
							<input type="text" id="amount" name="amount" class="form-control" pattern="^\d+(\.\d{1,2})?$" required>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-success">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Edit Bank Account Modal -->
	<div class="modal fade" id="editBankAccountModal" tabindex="-1" aria-labelledby="editBankAccountModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<form class="form">
					<div class="modal-header">
						<h5 class="modal-title" id="editBankAccountModalLabel">Edit Bank Account</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label for="bankAccountAmount" class="form-label">Amount:</label>
							<input type="text" id="bankAccountAmount" name="bankAccountAmount" pattern="^\d+(\.\d{1,2})?$" required class="form-control">
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-success">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- CD Modal -->
	<div class="modal fade" id="addCDModal" tabindex="-1" aria-labelledby="addCDModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered mx-auto">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="addCDModalLabel">Add Certificate of Deposit</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<form class="form">
					<div class="modal-body">
						<div class="mb-3">
							<label for="bank" class="form-label">Choose a bank:</label>
							<select id="bank" name="bank" class="form-select">
								{{ range .Banks }}
								<option value="{{.ID}}">{{.Name}}</option>
								{{ end }}
							</select>
						</div>
						<div class="mb-3">
							<label for="startDate" class="form-label">Beginning Date:</label>
							<input type="date" id="startDate" name="startDate" class="form-control" required>
						</div>
						<div class="mb-3">
							<label for="deposit" class="form-label">Initial Deposit ($):</label>
							<input type="text" id="deposit" name="deposit" class="form-control" pattern="^\d+(\.\d{1,2})?$" required>
						</div>
						<div class="mb-3">
							<label for="term" class="form-label">Term Length (months):</label>
							<input type="text" id="term" name="term" class="form-control" pattern="^\d+$" required>
						</div>
						<div class="mb-3">
							<label for="apy" class="form-label">APR Rate (%):</label>
							<input type="text" id="apy" name="apy" class="form-control" pattern="^\d+(\.\d{3,5})?$" required>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-success">Submit</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Edit CD Modal -->
	<div class="modal fade" id="editCDModal" tabindex="-1" aria-labelledby="editCDModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered mx-auto">
			<div class="modal-content">
				<form class="form" id="editCDForm">
					<div class="modal-header">
						<h5 class="modal-title" id="editCDModalLabel">Edit Certificate of Deposit</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancel"></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label for="bank" class="form-label">Choose a bank:</label>
							<select id="bank" name="bank" class="form-select" required>
								{{ range .Banks }}
								<option value="{{.ID}}">{{.Name}}</option>
								{{ end }}
							</select>
						</div>
						<div class="mb-3">
							<label for="startDate" class="form-label">Beginning Date:</label>
							<input type="date" id="startDate" name="startDate" class="form-control" required>
						</div>
						<div class="mb-3">
							<label for="deposit" class="form-label">Initial Deposit ($):</label>
							<input type="text" id="deposit" name="deposit" pattern="^\d+(\.\d{1,2})?$" class="form-control" required>
						</div>
						<div class="mb-3">
							<label for="term" class="form-label">Term Length (months):</label>
							<input type="text" id="term" name="term" pattern="^\d+$" class="form-control" required>
						</div>
						<div class="mb-3">
							<label for="apy" class="form-label">APR Rate (%):</label>
							<input type="text" id="apy" name="apy" pattern="^\d+(\.\d{3,5})?$" class="form-control" required>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
						<input type="submit" class="btn btn-success" value="Submit">
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Toast Container -->
	<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100">
		<div id="toastContainer" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body" id="toastMessage">Success!</div>
				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>
	</div>


	<script type="text/javascript" src="/static/js/addBankAccountModal.js"></script>
	<script type="text/javascript" src="/static/js/bankAccount.js"></script>
	<script type="text/javascript" src="/static/js/editBankAccountModal.js"></script>
	<script type="text/javascript" src="/static/js/addStickyModal.js"></script>
	<script type="text/javascript" src="/static/js/editStickyModal.js"></script>
	<script type="text/javascript" src="/static/js/addCDModal.js"></script>
	<script type="text/javascript" src="/static/js/editCDModal.js"></script>
	<script type="text/javascript" src="/static/js/crypto-js.min.js"></script>
	<script type="text/javascript" src="/static/js/time.js"></script>
	<script type="text/javascript" src="/static/js/card.js"></script>
	<script type="text/javascript" src="/static/js/CD.js"></script>
	<script type="text/javascript" src="/static/js/sticky.js"></script>
	<script type="text/javascript" src="/static/js/encrypt.js"></script>
	<script type="text/javascript" src="/static/js/decrypt.js"></script>
	<script type="text/javascript" src="/static/js/crypto-3_1_9-1.js"></script>
	<script type="text/javascript" src="/static/js/dashboard.js"></script>


</body>
</html>
