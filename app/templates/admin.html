<!DOCTYPE html>
<html data-bs-theme="dark">
	<head>
		<title>Profile - {{.User.Username}}</title>
		{{ template "Header" }}

		<link rel="stylesheet" href="/static/css/admin.css">
	</head>
	<body>
		<br><br>
		<div style = "margin:auto; width:50%; border: 3px solid black; padding:10px; border-radius: 25px;">
    			<h1 style = "text-transform:capitalize;">Welcome Admin : {{.User.Username}}</h1>
		</div>

		<!-- Add Bank Modal -->
		<div class="modal fade" id="addBankModal" tabindex="-1" aria-labelledby="addBankModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered mx-auto">
				<div class="modal-content">
					<form class="form" enctype="multipart/form-data">
						<div class="modal-header">
							<h5 class="modal-title" id="addBankModalLabel">Add Bank</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancel"></button>
						</div>
						<div class="modal-body">
							<div class="mb-3">
								<label for="title" class="form-label">Bank Name:</label>
								<input type="text" id="title" name="title" class="form-control" required>
							</div>
							<div class="mb-3">
								<label for="bank_image" class="form-label">Bank Image:</label>
								<input type="file" id="bank_image" name="bank_image" class="form-control" required>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
							<input type="submit" class="btn btn-success" value="Submit">
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Add Credit Card Modal -->
		<div class="modal fade" id="addCreditCardModal" tabindex="-1" aria-labelledby="addCreditCardModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered mx-auto">
				<div class="modal-content">
					<form class="form" enctype="multipart/form-data">
						<div class="modal-header">
							<h5 class="modal-title" id="addCreditCardModalLabel">Add Credit Card</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<label for="bank_name">Choose a bank:</label>
							<select id="bank_name" name="bank_name" class="form-select" required>
								{{ range .Banks }}
									<option value="{{.ID}}">{{.Name}}</option>
								{{ end }}
							</select><br>
							<label for="card_name">Card Name:</label>
							<input type="text" id="card_name" name="card_name" class="form-control" required><br>
							<label for="card_image">Card Image:</label>
							<input type="file" id="card_image" name="card_image" class="form-control" required>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
							<input type="submit" class="btn btn-success" value="Submit">
						</div>
					</form>
				</div>
			</div>
		</div>


		<br><br>
		<div style = "margin:auto; width:50%; border: 3px solid black; padding:10px; border-radius: 25px;" >
			
			<div class="card-body d-flex align-items-center justify-content-center gap-3">
                                        <h2 class="mb-0">Banks</h2>
                                        <button class="btn btn-success open-add-bank-button">+</button>
                        </div>

			<hr class="hr" />

			<!-- Search Input -->
			<div class="container my-3">
				<input type="text" id="searchInput" class="form-control" placeholder="Search banks...">
			</div>

			<!-- Bank List -->
			<div class="container" style="max-height: 800px; overflow-y:auto;" id="bankList">
				{{ range .Banks }}
					<div class="bank-item row justify-content-around text-white bg-dark mb-3 mx-auto" data-name="{{.Name}}">
						<div class="col-sm bank-name">{{.Name}}</div>
						<div class="col-sm">
							<img src="{{.Image}}" style="width:128px;height:128px;">
						</div>
						<div class="col-sm">
							<button id="{{.ID}}" onclick="postDeleteBank(this.id)" class="btn btn-danger">ⓧ</button>
						</div>
					</div>
				{{ end }}
			</div>
		</div>

		<br><br>

		<div style = "margin:auto; width:50%; border: 3px solid black; padding:10px; border-radius: 25px;" >
		<!-- Credit Card Search Input -->
		<div class="container my-3">
			<input type="text" id="searchCardInput" class="form-control" placeholder="Search credit cards...">
		</div>

		<!-- Scrollable Credit Card List -->
		<div class="container" id="cardList" style="max-height: 800px; overflow-y: auto; overflow-x: hidden; padding-right: 10px;">
			{{ range .Cards }}
				<div class="card-item row justify-content-around text-white bg-dark py-2 px-2" data-name="{{.CardBank}} {{.CardName}}">
					<div class="col-sm card-name">{{.CardBank}} - {{.CardName}}</div>
					<div class="col-sm">
						<img src="{{.CardArtwork}}" style="max-width: 100px; max-height: 100px;">
					</div>
					<div class="col-sm">
						<button id="{{.ID}}" onclick="postDeleteCard(this.id)" class="btn btn-danger">ⓧ</button>
					</div>
				</div>
			{{ end }}
		</div>
		</div>

		<br><br>

		<!-- TOAST message -->
		<div id="toastContainer" class="toast align-items-center position-fixed bottom-0 end-0 m-3 text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
			<div class="d-flex">
				<div class="toast-body" id="toastMessage">
					<!-- Message will be injected here -->
				</div>

				<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
			</div>
		</div>


		<script type="text/javascript" src="/static/js/addBankModal.js?v=1.0"></script>
		<script type="text/javascript" src="/static/js/addCreditCardModal.js"></script>
		<script type="text/javascript" src="/static/js/searchBank.js" defer></script>
		<script type="text/javascript" src="/static/js/searchCard.js" defer></script>
		<script type="text/javascript" src="/static/js/bank.js"></script>
		<script type="text/javascript" src="/static/js/card.js"></script>
	</body>
</html>
